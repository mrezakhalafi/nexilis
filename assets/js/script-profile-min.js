var data=[],dataFiltered=[],productImageMap=new Map,productImageStateMap=new Map,carouselIntervalId=0,STORE_ID=new URLSearchParams(window.location.search).get("store_id"),currentSort="";let followEnabled=!0;var activeQuery=new URLSearchParams(window.location.search).get("query")?new URLSearchParams(window.location.search).get("query"):"";let activeFilter=new URLSearchParams(window.location.search).get("filter")?new URLSearchParams(window.location.search).get("filter"):"";window.addEventListener("storage",(async function(){1==sessionStorage.getItem("refresh")&&(sessionStorage.removeItem("refresh"),window.location.reload())}),!1);let f_pin="";var ua=window.navigator.userAgent,palioBrowser=!!ua.match(/PalioBrowser/i),isChrome=!!ua.match(/Chrome/i),myModalEl=document.getElementById("modal-product"),modal=new bootstrap.Modal(myModalEl);f_pin=window.Android?window.Android.getFPin():new URLSearchParams(window.location.href).get("f_pin");var grid_stack=GridStack.init({float:!1,disableOneColumnMode:!0,column:3,margin:2.5});function getExtension(e){var t=e.split(".");return t[t.length-1]}function isVideo(e){switch(getExtension(e).toLowerCase()){case"m4v":case"avi":case"mpg":case"mp4":return!0}return!1}let limit=18,offset=0,busy=!1;function gridCheck(e,t){return e.some((e=>e.id===t))}var nextCarouselIdx=0,carouselList=[],gridElements=[],fillGridStack=function(e,t,o){gridElements=[];let n="";if(!n)if(window.Android)try{n=window.Android.getFPin()}catch(e){}else n=new URLSearchParams(window.location.search).get("f_pin");dataFiltered.slice(o,t+1).forEach(((e,t)=>{var o="",n=productImageMap.get(e.CODE);Math.floor(5e3*Math.random());if(n){n.forEach(((e,t)=>{"http"!=e.substr(0,4)&&(e="/nexilis/images/"+e),isVideo(e)&&0==t?(o=o+'<div class="carousel-item active"><div class="center-crop-img"><video muted playsinline class="content-image"><source src="'+e+'"></video></div></div>',t++):isVideo(e)?o=o+'<div class="carousel-item"><div class="center-crop-img"><video muted playsinline class="content-image"><source src="'+e+'"></video></div></div>':0==t?(o=o+'<div class="carousel-item active"><div class="center-crop-img"><img draggable="false" class="content-image" src="'+e+'"/></div></div>',t++):o=o+'<div class="carousel-item"><div class="center-crop-img"><img draggable="false" class="content-image" src="'+e+'"/></div></div>'}));var a='<div class="inner" onclick="showProductModal(\''+e.CODE+"', "+e.IS_PRODUCT+');"><div id="store-carousel-'+e.CODE+'" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false"><div class="carousel-inner">'+o+"</div></div></div>";gridElements.push({id:e.ID,minW:1,minH:1,maxW:1,maxH:1,content:a})}n.length>1&&carouselList.push("#store-carousel-"+e.CODE)})),$("#loading").addClass("d-none"),grid_stack.removeAll(),grid_stack.load(gridElements,!0),0==dataFiltered.length?$("#no-stores").removeClass("d-none"):$("#no-stores").addClass("d-none"),carouselIntervalId&&clearInterval(carouselIntervalId),carouselIntervalId=setInterval((function(){carouselNext()}),3e3),checkVideoCarousel(),checkVideoViewport(),checkCarousel(),correctVideoCrop(),correctImageCrop()},fillGridWidgets=function(e,t,o){let n=o,a=o+t,i=new URLSearchParams(window.location.search).get("f_pin");if(!i)if(window.Android)try{i=window.Android.getFPin()}catch(e){}else i="";let s=dataFiltered.slice(n+1,a);s.forEach(((e,t)=>{var o="",n=productImageMap.get(e.CODE);Math.floor(5e3*Math.random());if(n){n.forEach(((e,t)=>{"http"!=e.substr(0,4)&&(e="/nexilis/images/"+e),isVideo(e)&&0==t?(o=o+'<div class="carousel-item active"><video muted playsinline class="content-image"><source src="'+e+'"></video></div>',t++):isVideo(e)?o=o+'<div class="carousel-item"><video muted playsinline class="content-image"><source src="'+e+'"></video></div>':0==t?(o=o+'<div class="carousel-item active"><img draggable="false" class="content-image" src="'+e+'"/></div>',t++):o=o+'<div class="carousel-item"><img draggable="false" class="content-image" src="'+e+'"/></div>'}));var a='<div class="inner" onclick="showProductModal(\''+e.CODE+'\');"><div id="store-carousel-'+e.CODE+'" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false"><div class="carousel-inner">'+o+"</div></div></div>";gridCheck(gridElements,e.CODE)||(gridElements.push({id:e.CODE,minW:1,minH:1,maxW:1,maxH:1,content:a}),grid_stack.addWidget({id:e.CODE,minW:1,minH:1,maxW:1,maxH:1,content:a}))}n.length>1&&carouselList.push("#store-carousel-"+e.CODE)})),grid_stack.compact(),busy=!1,0==dataFiltered.length?$("#no-stores").removeClass("d-none"):$("#no-stores").addClass("d-none"),carouselIntervalId&&clearInterval(carouselIntervalId),carouselIntervalId=setInterval((function(){carouselNext()}),3e3),checkVideoCarousel(),checkVideoViewport(),checkCarousel(),correctVideoCrop(),correctImageCrop()};function correctVideoCrop(){document.querySelectorAll("video.content-image").forEach((function(e){e.addEventListener("loadedmetadata",(function(){e.videoWidth>e.videoHeight&&e.classList.add("landscape")}))}))}let countVideoPlaying=0;var visibleCarousel=new Set;function checkVideoViewport(){let e=document.querySelectorAll("video"),t=[].slice.call(e).reverse(),o=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>=.7&&$("#modal-product").not(".show")&&0===countVideoPlaying?function(e,t){let o=e;e.querySelector(".carousel");null!=o&&o.paused&&(o.play(),countVideoPlaying=1)}(e.target,e.intersectionRatio):e.intersectionRatio<.7&&function(e,t){let o=e;e.querySelector(".carousel");null==o||o.paused||(o.pause(),countVideoPlaying=0)}(e.target,e.intersectionRatio)}))}),{threshold:1});t.forEach((e=>{o.observe(e)}))}function carouselNext(){if(carouselList.length<=0)return;let e=nextCarouselIdx;for(;!$(carouselList[nextCarouselIdx]).is(":in-viewport")&&((nextCarouselIdx+=1)>=carouselList.length&&(nextCarouselIdx=0),nextCarouselIdx!=e););$(carouselList[nextCarouselIdx]).carousel("next"),(nextCarouselIdx+=1)>=carouselList.length&&(nextCarouselIdx=0)}function correctImageCrop(){document.querySelectorAll("img.content-image").forEach((function(e){e.addEventListener("load",(function(){e.width>e.height&&e.classList.add("landscape")}))}))}function checkVideoCarousel(){$("#modal-product .carousel").on("slide.bs.carousel",(function(e){var t=document.getElementById("modal-product").querySelector(".carousel-item video");t[e.from].pause(),t[e.to].play()}))}visibleCarousel=new Set;function checkCarousel(){$(".carousel").each((function(){$(this).is(":in-viewport")?visibleCarousel.has($(this).attr("id"))||(visibleCarousel.add($(this).attr("id")),$(this).carousel("cycle")):visibleCarousel.has($(this).attr("id"))&&(visibleCarousel.delete($(this).attr("id")),$(this).carousel("pause"))}))}function scrollFunction(){$(document).scrollTop()>20?$("#scroll-top").css("display","block"):$("#scroll-top").css("display","none")}function topFunction(){$(document).scrollTop(0)}var storeData=null;function openStore(e,t){window.Android?storeData&&window.Android.openStore(storeData):window.location.href=t}function fetchStoreData(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){let t=JSON.parse(e.responseText);storeData=JSON.stringify(t[0]);try{window.Android}catch(e){}}},e.open("get","/nexilis/logics/fetch_stores_specific?store_id="+store_code),e.send()}function visitStore(e,t,o){var n=new FormData;if(n.append("store_code",e),n.append("f_pin",t),n.append("flag_visit",o?1:0),e&&t){let e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&e.status},e.open("post","/nexilis/logics/visit_store"),e.send(n)}}function goBack(){let e="";if(e=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"),null!=localStorage.getItem("currentTab")){let t=localStorage.getItem("currentTab");if("0"==t)window.location.href="tab1-main-only?f_pin="+e;else if("1"==t)window.location.href="tab3-main-only?f_pin="+e;else if("2"==t){let t=localStorage.getItem("is_grid");window.location.href=t?"0"==t?"tab1-main?f_pin="+e:"tab3-main?f_pin="+e:"tab1-main?f_pin="+e}else"4"==t&&(window.location.href="tab1-video?f_pin="+e)}else window.location=document.referrer}function pullRefresh(){window.Android&&0==$(window).scrollTop()&&window.scrollTo(0,document.body.scrollHeight-(document.body.scrollHeight-3))}function ext(e){return(e=e.substr(1+e.lastIndexOf("/")).split("?")[0]).split("#")[0].substr(e.lastIndexOf(".")+1)}function updateCartCounter(){let e=0;if(null!=localStorage.getItem("cart"))var t=JSON.parse(localStorage.getItem("cart"));else t=[];t.forEach((t=>{t.items.forEach((t=>{e+=parseInt(t.itemQuantity)}))})),0!=e?($("#cart-counter").removeClass("d-none"),$("#cart-counter").html(e)):$("#cart-counter").addClass("d-none")}$((function(){fetchStoreData(),fetchProducts(),updateCounter();let e=sessionStorage.getItem("currentStore"),t=new URLSearchParams(window.location.search).get("store_id");if(sessionStorage.setItem("currentStore",t),e!=t||null==e)sessionStorage.setItem("profileTabPos",0),$(".tab-pane#timeline").addClass("show active"),$(".nav-link#timeline-tab").addClass("active"),$(".tab-pane#profile").removeClass("show active"),$(".nav-link#profile-tab").removeClass("active");else{let e=sessionStorage.getItem("profileTabPos");null!=e?0==e?($(".tab-pane#timeline").addClass("show active"),$(".nav-link#timeline-tab").addClass("active"),$(".tab-pane#profile").removeClass("show active"),$(".nav-link#profile-tab").removeClass("active")):($(".tab-pane#timeline").removeClass("show active"),$(".nav-link#timeline-tab").removeClass("active"),$(".tab-pane#profile").addClass("show active"),$(".nav-link#profile-tab").addClass("active")):($(".tab-pane#timeline").addClass("show active"),$(".nav-link#timeline-tab").addClass("active"),$(".tab-pane#profile").removeClass("show active"),$(".nav-link#profile-tab").removeClass("active"))}if(window.Android){try{window.Android.setCurrentStore(store_code,be_id)}catch(e){}var o=!1;try{o=window.Android.getIsInternal()}catch(e){}o?($("#gear").removeClass("d-none"),$("#header").click((function(){if(window.Android){let e=new URLSearchParams(window.location.search).get("store_id");window.Android.openStoreAdminMenu(e)}}))):$("#gear").addClass("d-none")}$("#addtocart-success").on("hide.bs.modal",(function(){updateCounter()}))})),$(".nav-link#timeline-tab").click((function(){sessionStorage.setItem("profileTabPos",0)})),$(".nav-link#profile-tab").click((function(){sessionStorage.setItem("profileTabPos",1)}));let productArr=[];function fetchProducts(){let e="";e=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"),localStorage.setItem("save_f_pin",e);var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){data=JSON.parse(t.responseText),productArr=data,data.forEach((e=>{if(!e.THUMB_ID.startsWith("http"))location.host;e.THUMB_ID.split("|").forEach((t=>{productImageMap.has(e.CODE)||null==t||""==t.trim()?null!=t&&""!=t.trim()&&productImageMap.set(e.CODE,productImageMap.get(e.CODE).concat([t])):productImageMap.set(e.CODE,[t])}))})),filterStoreData(activeQuery,!1,activeFilter),fillGridStack("#content-grid",limit,offset);try{window.Android&&window.Android.setCurrentProductsData(t.responseText)}catch(e){}}},t.open("get","/nexilis/logics/fetch_products?store_id="+store_id+"&f_pin="+e),t.send()}function changeStoreSettings(e){let t=JSON.parse(e);if(null!=t.STORE&&null!=t.IS_SHOW){$store_code=t.STORE,$is_show=t.IS_SHOW;var o=new FormData;if(o.append("store_code",$store_code),o.append("is_show",$is_show),$store_code){let e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&(200==e.status?(showAlert("Berhasil mengubah pengaturan."),fetchStoreData()):showAlert("Gagal mengubah pengaturan. Coba lagi nanti."))},e.open("post","/nexilis/logics/change_store_settings"),e.send(o)}}else showAlert("Gagal mengubah pengaturan. Coba lagi nanti.")}function changeStoreShowcaseSettings(e){if($dataShowcaseSettings=JSON.parse(e),null==$dataShowcaseSettings)return void showAlert("Gagal mengubah pengaturan. Coba lagi nanti.");var t="";$dataShowcaseSettings.forEach((e=>{var o="".concat(e.PRODUCT_CODE,"~",e.IS_SHOW);t=""==t?o:t.concat(",",o)}));var o=new FormData;o.append("settings_data",t);let n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(200==n.status?(showAlert("Berhasil mengubah pengaturan."),fetchProducts()):showAlert("Gagal mengubah pengaturan. Coba lagi nanti."))},n.open("post","/nexilis/logics/change_store_showcase_settings"),n.send(o)}function showAlert(e){window.Android&&window.Android.showAlert(e)}function numberWithCommas(e){return e.toLocaleString()}function openDetailProduct(e){let t=productArr.filter((t=>t.CODE==e))[0];$("#modal-addtocart .addcart-img-container").html(""),$("#modal-addtocart .product-name").html(""),$("#modal-addtocart .product-price").html(""),$("#modal-addtocart .prod-details .col-11").html("");let o=t.THUMB_ID.split("|"),n=t.NAME,a=numberWithCommas(t.PRICE),i=t.DESCRIPTION,s="",d=ext(o[0]);if(".jpg"==d||".png"==d||".webp"==d)s=`<img draggable="false" class="product-img" src="${o[0]}">`;else if(".mp4"==d||".webm"==d){s=`\n        <div class="video-wrap"><video playsinline muted="" class="myvid" preload="metadata"\n                poster="${o[0].replace(d,".webp")}">\n                <source src="${o[0]}" type="video/mp4"></video>\n        </div>\n        `}let l="../assets/img/icons/Wishlist-(White).png";1==isFollowed&&(l="../assets/img/icons/Wishlist-fill.png"),s+=`\n    <hr id="drag-this">\n    <img draggable="false" id="btn-wishlist" class="addcart-wishlist follow-icon-${t.SHOP_CODE}" onclick="followUser('${t.SHOP_CODE}','${f_pin}')" src="${l}">`,$("#modal-addtocart .addcart-img-container").html(s),$("#modal-addtocart .product-name").html(n),$("#modal-addtocart .product-price").html("Rp "+a),$("#modal-addtocart .prod-details .col-11").html(i)}function changeItemQuantity(e,t){"add"==t?document.getElementById(e).value=parseInt(document.getElementById(e).value)+1:document.getElementById(e).value>1&&(document.getElementById(e).value=parseInt(document.getElementById(e).value)-1)}function playModalVideo(){$("#modal-addtocart .addcart-img-container video").each((function(){$(this).off("play"),$(this).on("play",(function(e){$(this).closest(".carousel").carousel("pause")})),$(this).get(0).play(),$(this).parent().find(".video-play").addClass("d-none")}))}function hideAddToCart(){$("#modal-addtocart").hasClass("show")?$("#modal-addtocart").modal("hide"):$("#modal-product").hasClass("show")&&$("#modal-product").modal("hide")}function pauseAll(){$(".carousel-item video, .timeline-image video").each((function(){$(this).get(0).pause()})),visibleCarousel.clear(),$(".carousel").each((function(){$(this).carousel("pause")})),carouselIntervalId&&(clearInterval(carouselIntervalId),carouselIntervalId=0)}function resumeAll(){checkVideoViewport(),checkVideoCarousel(),checkCarousel(),carouselIntervalId&&clearInterval(carouselIntervalId),carouselIntervalId=setInterval((function(){carouselNext()}),3e3),updateCounter()}function addToCartModal(){const e=parseInt($("#header").offset().top+$("#header").outerHeight(!0))+"px",t=JSON.parse(JSON.stringify(e));let o="",n=parseInt(t.replace("px",""));$("#modal-addtocart .modal-dialog").draggable({handle:".modal-content",axis:"y",drag:function(e,t){t.position.top<n&&(t.position.top=n),t.position.top+window.innerHeight-window.innerHeight>150&&$("#modal-addtocart").modal("hide")}});window.navigator.userAgent;$('[data-bs-target="#modal-addtocart"]').click((function(){$("#modal-addtocart .modal-dialog").css("top",t),$("#modal-addtocart .modal-dialog").css("height",window.innerHeight-t);let e=parseInt(t.replace("px",""))+25;window.webkit&&window.webkit.messageHandlers&&(e=parseInt(t.replace("px",""))+90),$("#modal-addtocart .prod-addtocart").css("bottom",e+"px");let n=$(this).attr("id").split("-")[1];o=n,showAddModal(o)})),$("#modal-addtocart").on("shown.bs.modal",(function(){$(".modal").css("overflow","hidden"),$(".modal").css("overscroll-behavior-y","contain"),pullRefresh(),playModalVideo(),window.Android&&window.Android.setIsProductModalOpen(!0),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.setIsProductModalOpen&&window.webkit.messageHandlers.setIsProductModalOpen.postMessage({param1:!0})})),$("#modal-addtocart").on("hidden.bs.modal",(function(){$(".modal").css("overflow","auto"),$(".modal").css("overscroll-behavior-y","auto"),pullRefresh(),$("#modal-addtocart .addcart-img-container").html(""),$("#modal-addtocart .product-name").html(""),$("#modal-addtocart .product-price").html(""),$("#modal-addtocart .prod-details .col-11").html(""),window.Android&&window.Android.setIsProductModalOpen(!1),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.setIsProductModalOpen&&window.webkit.messageHandlers.setIsProductModalOpen.postMessage({param1:!1})})),$("#add-to-cart").click((function(){let e=parseInt($("#modal-item-qty").val());addToCart(o,e)}))}function changeProfileTab(e){event.preventDefault(),posts=document.getElementById("posts"),shop=document.getElementById("shop"),posts_tab=document.getElementById("posts-tab"),shop_tab=document.getElementById("shop-tab"),"posts"==e?(posts.classList.remove("d-none"),shop.classList.add("d-none"),posts_tab.classList.add("active"),shop_tab.classList.remove("active")):(posts.classList.add("d-none"),shop.classList.remove("d-none"),posts_tab.classList.remove("active"),shop_tab.classList.add("active"))}function followUser(e,t,o=!1){let n="";if(t=isFollowed,window.Android){if(!window.Android.checkProfile())return;n=window.Android.getFPin()}else{if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===o)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:e+"|"+t,param2:"follow_user"});n=new URLSearchParams(window.location.search).get("f_pin")}followEnabled=!1;let a=document.getElementById("follower-count").innerText,i=parseInt(a),s="Follow",d="Unfollow";1==localStorage.lang&&(s="Ikuti",d="Berhenti Mengikuti"),1==t?(isFollowed=0,$("#btn-follow").text(s),$("#modal-addtocart #btn-wishlist").attr("src","../assets/img/icons/Wishlist.png"),i-=1,0==i&&(i=0)):(isFollowed=1,$("#btn-follow").text(d),$("#modal-addtocart #btn-wishlist").attr("src","../assets/img/icons/Wishlist-fill.png"),i+=1);var l=(new Date).getTime(),r=new FormData;r.append("store_code",e),r.append("f_pin",n),r.append("last_update",l),r.append("flag_follow",isFollowed);let c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(updateScoreShop(e),document.getElementById("follower-count").innerText=i,followEnabled=!0)},c.open("post","/nexilis/logics/follow_store"),c.send(r)}function eraseQuery(){$("#delete-query").click((function(){$("#searchFilterForm-a input#query").val(""),$("#delete-query").addClass("d-none"),searchFilter()})),""!=$("#searchFilterForm-a input#query").val()&&$("#delete-query").removeClass("d-none"),$("#searchFilterForm-a input#query").keyup((function(){""!=$(this).val()?$("#delete-query").removeClass("d-none"):$("#delete-query").addClass("d-none")}))}function resetSearch(){$("#searchFilterForm-a input#query").val("")}function getProductThumbs(e,t){let o=new FormData;o.append("product_id",e),o.append("is_product",t);let n="";return n=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"),o.append("f_pin",n),new Promise((function(e,t){var n=new XMLHttpRequest;n.open("POST","/nexilis/logics/get_product_thumbs"),n.onload=function(){this.status>=200&&this.status<300?e({thumb_id:JSON.parse(n.response).THUMB_ID,thumbnail:JSON.parse(n.response).THUMBNAIL,file_type:JSON.parse(n.response).FILE_TYPE,name:JSON.parse(n.response).NAME,description:JSON.parse(n.response).DESCRIPTION,CODE:JSON.parse(n.response).CODE,LINK:JSON.parse(n.response).LINK}):t({status:this.status,statusText:n.statusText})},n.onerror=function(){t({status:this.status,statusText:n.statusText})},n.send(o)}))}function getComments(e){return new Promise((function(t,o){let n=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"),a="comment_modal.php?product_code="+e+"&f_pin="+n+"&is_post=1&icp="+isChangedProfile+"&lang="+localStorage.lang;xReply=1,xReffReply=10;$.get(a,(function(e){t(e)}))}))}function toggleVideoMute(e){let t=document.getElementById(e).querySelector("video"),o=document.querySelector("#"+e+" .video-sound img");t.muted?(t.muted=!1,o.src="../assets/img/video_unmute.png"):(t.muted=!0,o.src="../assets/img/video_mute.png")}function playVid(e){let t=document.querySelector("#"+e),o=t.querySelector("video"),n=t.querySelector(".video-play");n.addEventListener("click",(e=>{o.paused&&(o.play(),n.classList.add("d-none"))})),o.addEventListener("click",(e=>{o.paused?(o.play(),n.classList.add("d-none")):(o.pause(),n.classList.remove("d-none"))}))}let video_arr=["webm","mp4","mov","avi"],img_arr=["png","jpg","webp","gif","jpeg"];class ShowProduct{constructor(e,t=""){let o=e.thumb_id.split("|"),n=richText(decodeURI(e.name)),a=richText(decodeURI(e.description)),i="";i=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin");let s="",d="";if(d='<img draggable="false" class="close-icon" onclick="closeModal()" src="../assets/img/close-icon.png" style="position: absolute;z-index: 500;right: 0;margin-right: 20px;margin-top: 20px;width: 27px;height: 27px;/* filter: drop-shadow(3px 0px 1px #222); */background-color: rgb(142 142 142 / 60%);border-radius: 20px;padding: 5px">',1==o.length){let t=ext(o[0]);video_arr.includes(t)?s=`\n                <div class="video-wrap" id="videowrap-modal-${e.CODE}">\n                <video class="myvid" autoplay muted playsinline>\n                <source src="${e.thumb_id.includes("http")?e.thumb_id:"/nexilis/images/"+e.thumb_id}">\n                </video>\n                <div class="video-sound" onclick="event.stopPropagation(); toggleVideoMute('videowrap-modal-${e.CODE}');">\n                <img draggable="false" src="../assets/img/video_mute.png" />\n                </div>\n                <div class="video-play d-none" onclick="event.stopPropagation(); playVid('videowrap-modal-${e.CODE}');">\n                '<img draggable="false" src="../assets/img/video_play.png" />\n                </div>\n                </div>\n                `:img_arr.includes(t)&&(s=`\n                    <img draggable="false" src="${e.thumb_id.includes("http")?e.thumb_id:"/nexilis/images/"+e.thumb_id}" class="d-block w-100">\n                `)}else{s='\n            <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false">\n            <div class="carousel-inner">\n            ';let t=o.filter((e=>""!=e.trim()||e.length>0));t.forEach(((t,o)=>{if(""!=t.trim()){s+=`<div class="carousel-item${0==o?" active":""}">`;let n=ext(t);video_arr.includes(n)?s+=`\n                        <div class="video-wrap" id="videowrap-modal-${e.CODE}-${o}">\n                        <video class="myvid" autoplay muted playsinline src="${t.includes("http")?t:"/nexilis/images/"+t}" style="z-index:10;" onclick="event.stopPropagation(); playVid('videowrap-modal-${e.CODE}-${o}');"></video>\n                        <div class="video-sound" onclick="event.stopPropagation(); toggleVideoMute('videowrap-modal-${e.CODE}-${o}');">\n                        <img draggable="false" src="../assets/img/video_mute.png" />\n                        </div>\n                        <div class="video-play" style="z-index:10;" onclick="event.stopPropagation(); playVid('videowrap-modal-${e.CODE}-${o}');">\n                        <img draggable="false" src="../assets/img/video_play.png" />\n                        </div>\n                        </div>\n                        `:img_arr.includes(n)&&(s+=`\n                        <img draggable="false" src="${"http"==t.substr(0,4)?t:"/nexilis/images/"+t}" class="d-block w-100">\n                    `),s+="</div>"}})),t.length>1&&(s+='\n            </div>\n            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">\n                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n                    <span class="visually-hidden">Previous</span>\n                </button>\n                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">\n                    <span class="carousel-control-next-icon" aria-hidden="true"></span>\n                    <span class="visually-hidden">Next</span>\n                </button>\n            </div>\n            ')}let l="",r="";null!=e.LINK&&null!=e.LINK&&""!=e.LINK.trim()&&(l=e.LINK,"http"!=l.substring(0,4)&&(l="https://"+l),r=`\n           <a href="${l}" style="text-decoration:underline; color:#0d6efd";>Link</a>\n            `,"16467163130000246a901c4"==e.CODE&&(r=`\n           <a href="${l+"?f_pin="+i}" style="text-decoration:underline; color:#0d6efd";>Register membership</a>\n            `));let c=new URLSearchParams(window.location.search).get("store_id"),u="Report/flag Content",p="Remove/Block Content",m="Remove",g="Edit",f="Delete";1==localStorage.lang?(u="Laporkan Konten",p="Hapus/Blokir Konten",m="Hilangkan",g="Ubah",f="Hapus"):(u="Report/flag Content",p="Remove/Block Content",m="Remove",g="Edit",f="Delete"),this.html_header=`\n        <div>${n}</div>\n        <div class="dropdown dropdown-edit edit-menu-${c}" data-isadmin="${user_type}"><a class="post-status dropdown-toggle" data-bs-toggle="dropdown" id="edt-del-${e.CODE}"><img draggable="false" src="../assets/img/icons/More.png" height="25" width="25" style="background-color:unset;"></a>\n            <ul class="dropdown-menu" aria-labelledby="edt-del-${e.CODE}">\n                <li><a class="dropdown-item button_edit ${c==i?"":"d-none"}" onclick="editPost('${e.CODE}')">${g}</a></li>\n                <li><a class="dropdown-item button_delete ${c==i?"":"d-none"}" onclick="deletePost('${e.CODE}')">${f}</a></li>\n                <li><a class="dropdown-item button_adminremove ${"1"===user_type&&c!==i&&"1"===isChangedProfile?"":"d-none"}" onclick="confirmRemovePost('${e.CODE}')">${m}</a></li>\n                <li><a class="dropdown-item button_report ${c!=i?"":"d-none"}" onclick="reportContent('${e.CODE}',0)">${u}</a></li>\n                <li><a class="dropdown-item button_block ${c!=i?"":"d-none"}" onclick="blockContent('${e.CODE}')" style="color: brown">${p}</a></li>\n            </ul>\n        </div>\n        `,this.html_body='<img draggable="false" class="close-icon" onclick="closeModal()" src="../assets/img/close-icon.png" style="position: absolute;z-index: 500;right: 0;margin-right: 20px;margin-top: 20px;width: 27px;height: 27px;/* filter: drop-shadow(3px 0px 1px #222); */background-color: rgb(142 142 142 / 60%);border-radius: 20px;padding: 5px">'+s;let w=1==localStorage.lang?"Selengkapnya":"Read more";this.html_footer=`\n    \n        ${""!=r&&null!=r?"<span style='font-size:13px;'>"+r+"</span>":""}\n        <div class="prod-desc ${a.length>128?"truncate":""}" style="font-size:13px;">${a}</div>\n        ${a.length>128?'<span class="truncate-read-more" onclick="toggleProdDesc(this);">'+w+"</span>":""}\n        <div class="container" id="comments-modal"> \n        ${t}\n        </div>`,this.parent=document.body,this.modal_header=document.querySelector("#modal-product .modal-header"),this.modal_body=document.querySelector("#modal-product .modal-body"),this.modal_footer=document.querySelector("#modal-product .modal-footer"),this.modal_header.innerHTML=" ",this.modal_body.innerHTML=" ",this.modal_footer.innerHTML=" ",this._createModal(),window.Android&&window.Android.setIsProductModalOpen(!0),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.setIsProductModalOpen&&window.webkit.messageHandlers.setIsProductModalOpen.postMessage({param1:!0})}static async build(e,t){let o=await getProductThumbs(e,t),n="";return n=await getComments(e),new ShowProduct(o,n)}question(){}_createModal(e){this.modal_body.innerHTML=this.html_body,this.modal_header.innerHTML=this.html_header,this.modal_footer.innerHTML=this.html_footer;var t=document.getElementById("modal-product").querySelectorAll(".carousel-item .video-wrap");t.length>0&&$("#modal-product .carousel").on("slide.bs.carousel",(function(e){var o=t[e.from].querySelector("video"),n=t[e.from].querySelector(".video-play");o.pause(),n.classList.remove("d-none");var a=t[e.to].querySelector("video"),i=t[e.to].querySelector(".video-play");a.play(),i.classList.add("d-none")})),$("#modal-product").modal("show")}_destroyModal(){this.modal_body.innerHTML="",$("#modal-product").modal("toggle")}}function closeModal(e=!1){let t=document.querySelector("#modal-product .modal-body video");t&&(t.pause(),t.removeAttribute("src"),t.load()),$("#modal-product .modal-body").html(""),$("#modal-product").modal("hide"),window.Android&&window.Android.setIsProductModalOpen(!1),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.setIsProductModalOpen&&0==e&&window.webkit.messageHandlers.setIsProductModalOpen.postMessage({param1:!1})}async function showProductModal(e,t){event.preventDefault();await ShowProduct.build(e,t)}function checkVideoCarousel(){}function voiceSearch(){$("img#voice-search").click((function(){window.Android?($isVoice=window.Android.toggleVoiceSearch(),toggleVoiceButton($isVoice)):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.toggleVoiceSearch&&window.webkit.messageHandlers.toggleVoiceSearch.postMessage({param1:""})}))}function submitVoiceSearch(e){$("#searchFilterForm-a input#query").val(e),$("#delete-query").removeClass("d-none"),searchFilter()}function toggleVoiceButton(e){e?$("#voice-search").attr("src","../assets/img/action_mic_blue.png"):$("#voice-search").attr("src","../assets/img/action_mic.png")}$("#modal-product").on("shown.bs.modal",(function(){pauseAll()})),$("#modal-product").on("hide.bs.modal",(function(){let e=document.querySelector("#modal-product .modal-body video");e&&(e.pause(),e.removeAttribute("src"),e.load()),$("#modal-product .modal-body").html("")})),$("#modal-product").on("hidden.bs.modal",(function(){$("#modal-product .modal-body").html(""),resumeAll()})),$("#staticBackdrop").on("shown.bs.modal",(function(){pauseAll()})),$("#staticBackdrop").on("hidden.bs.modal",(function(){resumeAll()})),voiceSearch();let gif_arr=[],gif_pos=[0,1];function getGIFs(){let e="";e=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin");let t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){gif_arr=JSON.parse(t.responseText);let e=gif_arr;3===gif_arr.length&&(e=[gif_arr[1],gif_arr[0],gif_arr[2]]),drawGIFs(e)}},t.open("get","/nexilis/logics/fetch_gifs?f_pin="+e),t.send()}function drawGIFs(e){let t=parseInt(localStorage.getItem("last_ad"));null==t&&(t=0);let o=0;o=t+1<=e.length-1?t+1:0;let n="";n=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"),localStorage.setItem("last_ad",o);let a=e[o],i=(window.location.href,"");if(a.URL.includes("bni.co.id"))i=a.URL;else{let e=new URLSearchParams(window.location.search).get("store_id");window.location.pathname.split("/").includes("tab3-profile")&&(i=a.URL+"&f_pin="+n+"&origin=2&store_id="+e)}let s=`\n      <div id="gifs-${o}" class="gifs">\n      <a onclick="event.preventDefault(); goToURL('${i}');">\n          <img draggable="false" src="/nexilis/assets/img/gif/${a.FILENAME}">\n        </a>\n      </div>\n    `,d=a.DIRECTION;if("left"===a.DIRECTION)$("#gif-container").addClass("bottom"),$("#gif-container").addClass("right");else if("right"===a.DIRECTION)$("#gif-container").addClass("bottom"),$("#gif-container").addClass("left");else if("up"===a.DIRECTION){$("#gif-container").addClass("bottom");let e=["right","left"],t=Math.floor(Math.random()*e.length);$("#gif-container").addClass(e[t])}else if("down"===a.DIRECTION){$("#gif-container").addClass("top");let e=["right","left"],t=Math.floor(Math.random()*e.length);$("#gif-container").addClass(e[t])}else if(null===a.DIRECTION){let e=["right","left"],t=Math.floor(Math.random()*e.length);$("#gif-container").addClass("bottom"),$("#gif-container").addClass(e[t]),d="left"==e[t]?"right":"left"}$("#gif-container").append(s),document.getElementById("gifs-2"),animateAd(o,a.FILENAME,a.ANIM_TYPE,d)}function goToURL(e,t=!1){if(window.Android){if(window.Android.checkProfile()){window.Android.getFPin();window.location=e}}else{if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===t)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:e,param2:"gif"});new URLSearchParams(window.location.search).get("f_pin");window.location=e}}function animateAd(e,t,o,n){var a=$("#gifs-"+e).width();if("horizontal"===o){var i=$(window).width(),s=(a=$("#gifs-"+e).width(),i-(115+(d=20)));"right"===n?$("#gif-container").animate({left:s+"px"},5e3,(function(){$("#gif-container").css({right:d+"px",left:"auto"}),$("#gif-container").fadeOut()})):"left"===n&&$("#gif-container").animate({right:s+"px"},5e3,(function(){$("#gif-container").css({right:"auto",left:"20px"}),$("#gif-container").fadeOut()}))}else if("vertical"===o){i=$(window).height(),a=170;var d=140;if("up"===n){s=i-(a+30);$("#gif-container").animate({bottom:s+"px"},5e3,(function(){$("#gif-container").css({top:"30px",bottom:"auto"}),$("#gif-container").fadeOut()}))}else{s=i-(a+140);$("#gif-container").animate({top:s+"px"},5e3,(function(){$("#gif-container").css({top:"auto",bottom:"140px"}),$("#gif-container").fadeOut()}))}}$(window).scroll((function(){$(window).scrollTop()>=150&&($("#gif-container").stop(!0,!1),$("#gif-container").fadeOut())}))}function editPost(e){if(localStorage.setItem("activeQueryProfile",window.location.search),window.Android){let t=window.Android.getFPin();window.location="tab5-edit-post.php?f_pin="+t+"&post_id="+e+"&origin="+localStorage.getItem("currentTab")}else{let t=new URLSearchParams(window.location.search).get("f_pin");window.location="tab5-edit-post.php?f_pin="+t+"&post_id="+e+"&origin="+localStorage.getItem("currentTab")}}function deletePost(e){$("#just-post").addClass("d-none"),$("#just-product").addClass("d-none"),$("#both-pp").addClass("d-none"),$("#modal-product").modal("hide"),$("#modal-delete-question").modal("show");var t=new XMLHttpRequest;let o=new FormData;o.append("post_id",e),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var o=t.response.split("|"),n=o[0],a=o[1];1==n&&($("#just-post").removeClass("d-none"),$("#just-post").attr("onclick","deletePostOnly(`"+e+"`)")),1==a&&($("#just-product").removeClass("d-none"),$("#just-product").attr("onclick","deleteProductOnly(`"+e+"`)")),1==n&1==a&&($("#both-pp").removeClass("d-none"),$("#both-pp").attr("onclick","deleteBothContent(`"+e+"`)"))}},t.open("POST","/nexilis/logics/check_delete"),t.send(o)}function deletePostOnly(e){$("#modal-delete-question").modal("hide");var t=new XMLHttpRequest;let o=new FormData;o.append("post_id",e),o.append("ec_date",(new Date).getTime()),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&("Success"==t.responseText?(0==localStorage.lang?($("#delete-post-info .modal-body").html("<h6>Post deleted.</h6>"),$("#delete-post-close").text("Close")):($("#delete-post-info .modal-body").html("<h6>Postingan telah dihapus.</h6>"),$("#delete-post-close").text("Tutup")),$("#delete-post-info .modal-footer #delete-post-close").click((function(){window.location.reload()})),$("#delete-post-info").modal("toggle")):(0==localStorage.lang?($("#delete-post-info .modal-body").html("<h6>An error occured while deleting post. Please refresh and try again.</h6>"),$("#delete-post-close").text("Close")):($("#delete-post-info .modal-body").html("<h6>Error saat menghapus post. Silahkan muat ulang dan coba lagi.</h6>"),$("#delete-post-close").text("Tutup")),$("#delete-post-info").modal("toggle")))},t.open("POST","/nexilis/logics/delete_post"),t.send(o)}function deleteProductOnly(e){$("#modal-delete-question").modal("hide");var t=new XMLHttpRequest;let o=new FormData;o.append("product_code",e),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&("Success"==t.responseText?(0==localStorage.lang?($("#delete-post-info .modal-body").html("<h6>Product deleted.</h6>"),$("#delete-post-close").text("Close")):($("#delete-post-info .modal-body").html("<h6>Produk telah dihapus.</h6>"),$("#delete-post-close").text("Tutup")),$("#delete-post-info .modal-footer #delete-post-close").click((function(){window.location.reload()})),$("#delete-post-info").modal("toggle")):(0==localStorage.lang?($("#delete-post-info .modal-body").html("<h6>An error occured while deleting product. Please refresh and try again.</h6>"),$("#delete-post-close").text("Close")):($("#delete-post-info .modal-body").html("<h6>Error saat menghapus produk. Silahkan muat ulang dan coba lagi.</h6>"),$("#delete-post-close").text("Tutup")),$("#delete-post-info").modal("toggle")))},t.open("POST","/nexilis/logics/delete_product_only"),t.send(o)}function deleteBothContent(e){$("#modal-delete-question").modal("hide");var t=new XMLHttpRequest;let o=new FormData;o.append("post_id",e),o.append("ec_date",(new Date).getTime()),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&("Success"==t.responseText?(0==localStorage.lang?($("#delete-post-info .modal-body").html("<h6>Post and Product deleted.</h6>"),$("#delete-post-close").text("Close")):($("#delete-post-info .modal-body").html("<h6>Postingan dan Produk telah dihapus.</h6>"),$("#delete-post-close").text("Tutup")),$("#delete-post-info .modal-footer #delete-post-close").click((function(){window.location.reload()})),$("#delete-post-info").modal("toggle")):(0==localStorage.lang?($("#delete-post-info .modal-body").html("<h6>An error occured while deleting content. Please refresh and try again.</h6>"),$("#delete-post-close").text("Close")):($("#delete-post-info .modal-body").html("<h6>Error saat menghapus konten. Silahkan muat ulang dan coba lagi.</h6>"),$("#delete-post-close").text("Tutup")),$("#delete-post-info").modal("toggle")))},t.open("POST","/nexilis/logics/delete_both_content"),t.send(o)}function removePost(e){let t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&($("#modal-confirm-remove").modal("hide"),$("#modal-post-removed #post-removed-close").click((function(){window.location.reload()})),$("#modal-post-removed").on("hidden.bs.modal",(function(){window.location.reload()})),$("#modal-post-removed").modal("show"))},t.open("get","/nexilis/logics/admin_remove_post?post_id="+e),t.send()}function confirmRemovePost(e){$("#modal-product").modal("hide"),$("#modal-confirm-remove #remove-post-accept").off("click"),$("#modal-confirm-remove #remove-post-accept").click((function(){removePost(e)})),$("#modal-confirm-remove").modal("show")}function toggleProdDesc(e){let t=document.querySelector("#modal-product .modal-footer .prod-desc");t.classList.toggle("truncate");let o=document.querySelector("#modal-product .modal-footer .truncate-read-more");t.classList.contains("truncate")?o.innerText=1==localStorage.lang?"Selengkapnya":"Read more":o.innerText=1==localStorage.lang?"Sembunyikan":"Hide"}function filterStoreData(e,t,o=null){if(window.Android)try{hiddenStores=window.Android.getHiddenStores().split(",")}catch(e){}dataFiltered=[],data.forEach((t=>{var n=!1;null!=o&&""!=o?n=o.split("-").indexOf(t.CATEGORY+"")>-1:n=!0;var a=!1;(a=!e||((a=(a=a||t.TITLE.toLowerCase().includes(e.toLowerCase()))||t.DESCRIPTION.toLowerCase().includes(e.toLowerCase()))||t.NAME.toLowerCase().includes(e.toLowerCase())))&&n&&dataFiltered.push(t)}))}async function searchFilter(){1==localStorage.lang?$("#no-content-text").text("Tidak ada konten yang sesuai dengan kriteria"):$("#no-content-text").text("Nothing Matches your criteria");$("body").css("visibility","hidden"),$(".has-story").removeClass("selected");var e=window.location.href,t="";const o=$("#query").val();var n,a=activeFilter;(e.includes("#")&&(e=e.split("#")[0]),e.includes("?")&&(e=e.split("?")[0]),window.Android)?(n=window.Android.getFPin())&&(t=t.includes("?")?t+"&f_pin="+n:t+"?f_pin="+n):(n=new URLSearchParams(window.location.search).get("f_pin"))&&(t=t.includes("?")?t+"&f_pin="+n:t+"?f_pin="+n);if(""!=STORE_ID&&(t=t+"&store_id="+STORE_ID),""!=o){t=t+"&query="+encodeURIComponent(o)}if(""!=a){t=t+"&filter="+encodeURIComponent(a)}e+=t,history.pushState({search:o,filter:a},"Palio Browser",e),offset=0,$("#story-container").html(""),filterStoreData(o,!0,activeFilter),fillGridStack("#content-grid",limit,offset),$("body").css("visibility","visible")}function showAlert(e){window.Android&&window.Android.showAlert(e),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.showAlert&&window.webkit.messageHandlers.showAlert.postMessage({param1:e})}function commentProduct(e){if(""==document.getElementById("input").value.trim()){let e="Write a comment...";return 1==localStorage.lang&&(e="Isi komentar..."),void showAlert(e)}$("input:text").click((function(){$(this).val("")}));var t="";if(""!=(t=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"))){var o=(new Date).getTime(),n=new FormData,a=o.toString()+t;n.append("product_code",e),n.append("f_pin",t),n.append("last_update",o),n.append("comment",document.getElementById("input").value.trim()),n.append("discussion_id",a),xReply++;new URLSearchParams(window.location.search).get("is_post");if(n.append("is_post",1),!document.getElementById("reply-div").classList.contains("d-none")){var i=getCookie("commentId");n.append("reply_id",i),xReffReply+=10}let s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&200==s.status&&"Success Comment"==s.responseText&&(document.getElementById("reply-div").classList.contains("d-none")||(deleteAllCookies(),$("#reply-div").addClass("d-none"),document.getElementById("content-comment").style.marginBottom="3.5rem"),$("input#input").val(""),appendComment(n),updateScore(e,"comment"))},s.open("post","/nexilis/logics/comment_product"),s.send(n)}}function getCookie(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}async function appendComment(e){let t={};e.forEach(((e,o)=>t[o]=e));let o=new Date(parseInt(t.last_update)),n=o.getHours()+":"+o.getMinutes(),a=t.f_pin+t.last_update,i=await getProfpic(t.f_pin),s=await getUserName(t.f_pin),d="Reply",l="Delete";0==localStorage.lang?(d="Reply",l="Delete"):1==localStorage.lang&&(d="Balas",l="Hapus");let r=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin");if(t.hasOwnProperty("reply_id")){let e=t.reply_id,o=`\n        <div class="row comments cmt-reply" id="${a}" style="width:100%;">\n        <div class="commentId" style="display: none;">${a}</div>\n        <div class="fPin" style="display: none;">${t.f_pin}</div>\n        <div class="col-2">\n          <img draggable="false" onclick="window.location.href='tab3-profile?f_pin=${r}&store_id=${t.f_pin}'" id="user-thumb-reff-new-${xReffReply}" class="rounded-circle my-2" style="height:40px; width:40px; cursor:pointer; object-position: center; background: grey; object-fit: cover;" src="${i}">\n        </div>\n        <div class="col-10 text-break">\n          <div style="font-weight: bold;" class="mt-2 mb-1 mr-3">\n            <span id="user-name-reff-new-${xReffReply}">${s} </span>\n            <span style="font-weight: 300;"> ${t.comment}</span>\n          </div>\n          <div style="font-weight: 100; color: grey;" class="my-1">${n}&emsp; <span data-translate="comment-2" style="font-weight: 300;" onclick="onReply(true,'user-name-reff-new-${xReffReply}','${a}');">${d}</span>&emsp;<span class="text-delete" style="font-weight: 300;" onclick="showSuccessModal('${a}');">${l}</span>\n          </div>\n        </div>\n      </div>\n        `;!$(".comments#"+e).hasClass("cmt-reply")?$(".comments#"+e).append(o):$(".comments#"+e).after(o)}else{let e=document.getElementById("content-comment"),o=`\n        <div class="row mx-0 comments" id="${a}">\n            <div class="commentId" style="display: none;">${a}</div>\n            <div class="fPin" style="display: none;">${t.f_pin}</div>\n            <div class="col-2">\n            <img draggable="false" onclick="window.location.href='tab3-profile?f_pin=${r}&store_id=${t.f_pin}'" id="user-thumb-new-${xReply}" class="rounded-circle my-2" style="height:40px; width:40px; cursor:pointer; object-position: center; background: grey; object-fit: cover;" src="${i}">\n            </div>\n            <div class="col-10 text-break">\n            <div style="font-weight: bold;" class="mt-2 mb-1 mr-3">\n                <span id="user-name-new-${xReply}">${s} </span>\n                <span style="font-weight: 300;"> ${t.comment}</span>\n            </div>\n            <div style="font-weight: 100; color: grey;" class="my-1">${n}&emsp; <span style="font-weight: 300;" data-translate="comment-2" onclick="onReply(true,'user-name-new-${xReply}','${a}');">${d}</span>&emsp;<span class="text-delete" style="font-weight: 300;" onclick="showSuccessModal('${a}');">${l}</span>\n            </div>\n            </div>\n        </div>\n        `;e.innerHTML+=o}enableDelete()}function openDelete(e){return function(t){t.preventDefault(),t.stopPropagation(),showSuccessModal(e,void 0)}}function enableDelete(){$(".first-comment").each((function(){if(!$(this).hasClass("is-deleted")){let t=$(this).siblings(".commentId").text(),o=$(this).siblings(".fPin").text();var e="";try{e=new URLSearchParams(window.location.search).get("f_pin")}catch(e){}if(o!=e)return;$(this).unbind("contextmenu"),$(this).contextmenu((function(e){e.preventDefault(),e.stopPropagation(),showSuccessModal(t,void 0)}))}})),$(".comments").each((function(){let e=$(this).find(".commentId").text(),t=$(this).find(".fPin").text();var o="";try{o=new URLSearchParams(window.location.search).get("f_pin")}catch(e){}t==o&&($(this).unbind("contextmenu"),$(this).contextmenu((function(t){t.preventDefault(),t.stopPropagation(),showSuccessModal(e,void 0)})))}))}async function showSuccessModal(e,t){event.preventDefault(),$("body").css("overflow","hidden"),this.myModal=new SuccessModal(e,t);try{"delete"==await myModal.question()&&(this.myModal._destroyModal(),$(".comments#"+e).addClass("is-deleted"))}catch(e){}}function onReply(e,t,o){if(e){$("#input").focus(),finalName=document.getElementById(t).innerHTML,0==localStorage.lang?document.getElementById("content-reply").innerHTML="Reply to "+finalName:1==localStorage.lang&&(document.getElementById("content-reply").innerHTML="Balas ke "+finalName),document.getElementById("content-comment").style.marginBottom="3.5rem",document.cookie="commentId="+o,$("#reply-div").removeClass("d-none")}else deleteAllCookies(),$("#reply-div").addClass("d-none"),document.getElementById("content-comment").style.marginBottom="3.5rem"}function deleteAllCookies(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var o=e[t],n=o.indexOf("="),a=n>-1?o.substr(0,n):o;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}function getDisplayName(e,t){let o=e;try{window.Android&&(o=window.Android.getDisplayName(e))}catch(e){}if(o==e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);if(e.length>0){var o=e[0],a=o.FIRST_NAME,i=o.LAST_NAME,s="";s=i?a+" "+i:a,document.getElementById("user-name-"+t).innerHTML=s}}},n.open("get","/nexilis/logics/fetch_person?f_pin="+e),n.send()}else document.getElementById("user-name-"+t).innerHTML=o}function getUserName(e){let t=e;return new Promise((function(o,n){try{window.Android&&(t=window.Android.getDisplayName(e))}catch(e){}if(t==e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);if(e.length>0){var n=e[0],i=n.FIRST_NAME,s=n.LAST_NAME;t=s?i+" "+s:i,o(t)}}},a.open("get","/nexilis/logics/fetch_person?f_pin="+e),a.send()}else o(t)}))}function getDisplayNameReff(e,t,o){let n=e;try{window.Android&&(n=window.Android.getDisplayName(e))}catch(e){}if(n==e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);if(e.length>0){var n=e[0],i=n.FIRST_NAME,s=n.LAST_NAME,d="";d=s?i+" "+s:i,document.getElementById("user-name-reff-"+t+o).innerHTML=d}}},a.open("get","/nexilis/logics/fetch_person?f_pin="+e),a.send()}else document.getElementById("user-name-reff-"+t+o).innerHTML=n}function getThumbId(e,t){let o="";try{window.Android&&(o=window.Android.getImagePerson(e))}catch(e){}try{if(""==o){o="../assets/img/ic_person_boy.png",document.getElementById("user-thumb-"+t).src=o;var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);if(e.length>0){var a=e[0];a.IMAGE&&(o="/filepalio/image/"+a.IMAGE),document.getElementById("user-thumb-"+t).src=o}}},n.open("get","/nexilis/logics/fetch_person?f_pin="+e),n.send()}else o="/filepalio/image/"+o,document.getElementById("user-thumb-"+t).src=o}catch(e){}}function getThumbIdReff(e,t,o){let n="";try{window.Android&&(n=window.Android.getImagePerson(e))}catch(e){}try{if(""==n){n="../assets/img/ic_person_boy.png",document.getElementById("user-thumb-reff-"+t+o).src=n;var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);if(e.length>0){var i=e[0];i.IMAGE&&(n="/filepalio/image/"+i.IMAGE),document.getElementById("user-thumb-reff-"+t+o).src=n}}},a.open("get","/nexilis/logics/fetch_person?f_pin="+e),a.send()}else n="/filepalio/image/"+n,document.getElementById("user-thumb-reff-"+t+o).src=n}catch(e){}}function getProfpic(e){let t="";return new Promise((function(o,n){try{window.Android&&(t=window.Android.getImagePerson(e))}catch(e){}if(""==t){t="../assets/img/ic_person_boy.png";var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);if(e.length>0){var n=e[0];n.IMAGE&&(t="/filepalio/image/"+n.IMAGE),o(t)}}},a.open("get","/nexilis/logics/fetch_person?f_pin="+e),a.send()}else t="/filepalio/image/"+t,o(t)}))}function onFocusInput(){if(window.Android)try{window.Android.onFocusInput()}catch(e){}}$((function(){null!=document.getElementById("gif-container")&&getGIFs(),addToCartModal(),isFollowed;const e=new URLSearchParams(window.location.search);if(e.has("store_id")){let t=e.get("store_id"),o=e.get("f_pin");null!=o&&void 0!==o||(o=""),$("#btn-follow").click((function(){followEnabled&&followUser(t,o)})),$("#modal-follow-btn").click((function(){followUser(t,o)}))}eraseQuery(),$(window).scroll((function(){$(window).scrollTop()+$(window).height()>$("#content-grid").height()&&!busy&&(busy=!0,offset=limit+offset,setTimeout(fillGridWidgets("#content-grid",limit,offset),3e3))}))})),$("#searchFilterForm-a").validate({rules:{},messages:{},submitHandler:function(e){searchFilter()},errorClass:"help-block",errorPlacement:function(e,t){}}),$(".dropdown-edit").on("show.bs.dropdown",(function(){$(".close-icon").hide()})),$(".dropdown-edit").on("hide.bs.dropdown",(function(){$(".close-icon").show()})),enableDelete();
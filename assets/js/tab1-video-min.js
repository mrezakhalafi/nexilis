var f_pin="",loadVideo=0,limitVideo=0,likedPost=[],isSearchHidden=!0,defaultCategory="",activeFilter="";let currentUrl="",limit=10,offset=0,isCalled=!1,busy=!1;var navbarToTop=$("#company-logo-wrap").outerHeight(),listLS="",otherFilter={friends:0,verified:1,others:0};let mainVid="",mainPoster="";var query="";let disableMainVid=!1,domain="";function voiceSearch(){window.Android?($isVoice=window.Android.toggleVoiceSearch(),toggleVoiceButton($isVoice)):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.toggleVoiceSearch&&window.webkit.messageHandlers.toggleVoiceSearch.postMessage({param1:""})}function submitVoiceSearch(e){$("#query").val(e),$("#delete-query").removeClass("d-none"),searchFilter()}function toggleVoiceButton(e){e?$("#voice-search").attr("src","../assets/img/action_mic_blue.png"):$("#voice-search").attr("src","../assets/img/action_mic.png")}async function firstRunVideo(e=""){var o=new FormData;if(o.append("offset",0),o.append("f_pin",f_pin),o.append("limit",limit),""!=e){let i=new URL(e),t=new URLSearchParams(i.search);if(null!=t.get("filter")&&""!=t.get("filter")){let e=t.get("filter");o.append("filter",e)}if(null!=t.get("query")&&""!=t.get("query")){let e=t.get("query");o.append("query",e)}}for(var i of(o.append("verified",parseInt(otherFilter.verified)),o.append("friends",parseInt(otherFilter.friends)),o.append("others",parseInt(otherFilter.others)),o.entries()));let t=await getListLS(),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){$("#section-list-video").html("");let U=JSON.parse(n.responseText);t.forEach((e=>{U.unshift(e)}));var e=U.length;if(0==e){$("#section-list-video").html('<div class="container text-center pt-5">\n                                <p>No Video Available</p>\n                            </div>')}else for(var o=0;o<e;o++){var i=U[o].TITLE,r=decodeURIComponent((i+"").replace(/\+/g,"%20")),a=U[o].USERNAME,s=U[o].TOTAL_LIKES,l=U[o].COMMENT_USER,d=U[o].OFFICIAL_ACCOUNT,c=U[o].FILE_ID,p=U[o].THUMB_ID,w=U[o].USER_PIN,m=U[o].POST_ID,u=U[o].IS_LIKED,f=U[o].IS_COMMENT,g=U[o].IS_LS,h=U[o].IS_FOLLOW,v=U[o].FOLLOW_SHOP;if(1==u)var k="jim_likes_red.png";else k="jim_likes.png";if(1==f)var _="jim_comments_blue.png";else _="jim_comments.png";if(1==h)var y="followed.svg";else y="follow.svg";var b=r;if(r.length>35&&(b=r.substr(0,35)+"..."),0==g)if(""==p||null==p||"mp4"==p.split(".")[1])p="../assets/img/empty-thumbnail.jpg";else if(p.includes("|")){var S=c.split("|"),A=p.split("|");for(o=0;o<S.length;o++)if(S[o].includes(".mp4")){var C=A[o];p=domain+"/nexilis/images/"+C;break}}else p=domain+"/nexilis/images/"+p;else p=""!=p?domain+"/filepalio/image/"+p:"/nexilis/assets/img/ic_person_boy.png";let e='\n                    <div class="col-1 px-0 d-flex align-items-center">\n                        <img src="../assets/img/ic_verified_flag.png" style="width: 13px; height: 13px; margin-left: 3px;"> \n                    </div>';if(1==localStorage.lang)var L=0==g?"REKAMAN":"LIVE";else L=0==g?"RECORDED":"LIVE";var F=`<div id="video-${m}" class="row gx-0 shadow-sm m-2" style="border-radius: 10px">\n                                        <div class="col-5" ${0==g?"onclick=\"changeVideo('"+c+"', '"+p+"')\"":"onclick=\"openLiveStream('"+U[o].DATA+"')\""}>\n                                            <div class="video-thumb-wrap">\n                                                <img class="video-thumb" src="`+p+'" >\n                                                <span class="text-white p-1 text-recorded">'+L+'</span>\n                                            </div>\n                                        </div>\n                                        <div class="col-7 video-info" style=" padding: .5rem .75rem;">\n                                            <div class="row">\n                                                <div class="col-10">\n                                                    <h6 class="title" onclick="openProfile(\''+w+"')\">"+b+'</h6>\n                                                </div>\n                                                <div class="col-2">\n                                                    <div class="dropdown">\n                                                        <a class="post-status dropdown-toggle" data-bs-toggle="dropdown" id="report-'+m+'">\n                                                            <img src="../assets/img/icons/More.png" height="25" width="25" style="background-color:unset;">\n                                                        </a>\n                                                        <ul class="dropdown-menu" aria-labelledby="report-'+m+`">\n                                                            <li>\n                                                                <a class="dropdown-item button_report" onclick="reportContent('${m}','0')">Report/flag Content</a>\n                                                            </li>\n                                                            <li>\n                                                                <a class="dropdown-item button_report" onclick="reportUser('${w}')">Report/flag User</a>\n                                                            </li>\n                                                            <li>\n                                                                <a style="color:brown" class="dropdown-item button_report" onclick="blockContent('${m}')">Remove/Block Content</a>\n                                                            </li>\n                                                            <li>\n                                                                <a style="color:brown" class="dropdown-item button_report" onclick="blockUser('${w}')">Remove/Block User</a>\n                                                            </li>\n                                                        </ul>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="mt-2 bottom-info col-10" style="color: grey; font-size: 13px">\n                                                <div class="row d-flex align-items-center" style="margin-left:1px">\n                                                    ${2==d?e:""}\n                                                    <div class="col-11 ${2==d?"ps-2 pe-0":"px-0"}">\n                                                        <h6 class="mb-0 owner-name">${a}</h6>\n                                                    </div>\n                                                </div>\n                                                <div class="row section-social">\n                                                    <div class="col-4" onclick="likeProduct('${m}','1')">\n                                                        <img class="like-icon" id="like-${m}" src="../assets/img/${k}"> <span class="like-counter" id="like-counter-${m}">`+s+`</span>\n                                                    </div>\n                                                    <div class="col-4" onclick="openComment('${m}','1')">\n                                                        <img class="comment-icon" src="../assets/img/${_}"> <span class="comment-counter">`+l+` </span>\n                                                    </div>\n                                                    <div class="col-4" id="follow-div-${m}" onclick="followUser('${w}','${h}','${m}')">\n                                                        <img id="follow-${w}" class="comment-icon" src="../assets/img/social/${y}" style="opacity: 0.6"> <span id="follow-counter-${m}" style="color: #3678bd">`+v+" </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>";$("#section-list-video").append(F)}var P=U.find((e=>0==e.IS_LS)),T="";if(void 0===P)T="../assets/img/empty-thumbnail.jpg";else{var R=P.THUMB_ID,I=P.FILE_ID;if(""==R||null==R||"mp4"==R.split(".")[1])T="../assets/img/empty-thumbnail.jpg";else if(R.includes("|")){var E=R.split("|"),x=I.split("|");for(o=0;o<E.length;o++)if(x[o].includes(".mp4")){T=domain+"/nexilis/images/"+E[o];break}}else T=domain+"/nexilis/images/"+R}$("#main-video").attr("src",T),$("#main-video").attr("poster",T),0==U.length?$("#text-recorded-main").addClass("d-none"):$("#text-recorded-main").removeClass("d-none"),0==localStorage.lang?(document.getElementById("query").placeholder="Search",$("#text-recorded-main").text("RECORDED")):(document.getElementById("query").placeholder="Pencarian",$("#text-recorded-main").text("REKAMAN")),$("body").css("visibility","visible"),mainVid=P.FILE_ID,mainPoster=T,$("#main-video").click((function(){changeVideo(P.FILE_ID,T)}))}},n.open("post","../logics/get_video"),n.send(o)}function checkLimitVideo(e=""){return isCalled=!0,new Promise((function(o,i){var t=new FormData;if(t.append("f_pin",f_pin),""!=e){let o=new URL(e),i=new URLSearchParams(o.search);if(null!=i.get("filter")&&""!=i.get("filter")){let e=i.get("filter");t.append("filter",e)}if(null!=i.get("query")&&""!=i.get("query")){let e=i.get("query");t.append("query",e)}}for(var n of(t.append("verified",parseInt(otherFilter.verified)),t.append("friends",parseInt(otherFilter.friends)),t.append("others",parseInt(otherFilter.others)),t.entries()));let r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&o(parseInt(r.responseText))},r.open("post","../logics/get_limit_video"),r.send(t)}))}function changeVideo(e,o){for(var i=e.split("|"),t=o.split("|"),n=0;n<i.length;n++)if(i[n].includes(".mp4")){e=i[n],o=t[n];break}0==disableMainVid&&($(".video-wrap video").attr("src",domain+"/nexilis/images/"+e),$(".video-wrap video").attr("poster",o),showHideFilter(!1),$(".video-wrap").removeClass("d-none"),setTimeout((function(){document.querySelector("#video-wrap video").play()}),1e3))}function openProfile(e){localStorage.setItem("origin_page",window.location.href),window.location.href="tab3-profile.php?f_pin="+f_pin+"&store_id="+e}function LoadMore(e=""){loadVideo+=limit;var o=new FormData;if(o.append("offset",loadVideo),o.append("f_pin",f_pin),o.append("limit",limit),""!=e){let i=new URL(e),t=new URLSearchParams(i.search);if(null!=t.get("filter")&&""!=t.get("filter")){let e=t.get("filter");o.append("filter",e)}if(null!=t.get("query")&&""!=t.get("query")){let e=t.get("query");o.append("query",e)}}for(var i of(o.append("verified",parseInt(otherFilter.verified)),o.append("friends",parseInt(otherFilter.friends)),o.append("others",parseInt(otherFilter.others)),o.entries()));let t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){let L=JSON.parse(t.responseText);var e=L.length;if(0==e){if(1==localStorage.lang)var o="Tidak Ada Video yang Tersedia";else o="No More Video Available";var i='<div id="noMoreVideo" class="container text-center pt-3">\n                                <p>'+o+"</p>\n                            </div>";$("#section-list-video").append(i)}else{for(var n=0;n<e;n++){var r=L[n].TITLE,a=decodeURIComponent((r+"").replace(/\+/g,"%20")),s=L[n].POST_ID,l=L[n].USERNAME,d=L[n].TOTAL_LIKES,c=L[n].COMMENT_USER,p=(L[n].FOLLOW_SHOP,L[n].OFFICIAL_ACCOUNT),w=L[n].FILE_ID,m=L[n].THUMB_ID,u=L[n].USER_PIN,f=L[n].IS_LIKED,g=L[n].IS_COMMENT,h=L[n].IS_LS,v=L[n].IS_FOLLOW;L[n].FOLLOW_SHOP;if(1==f)var k="jim_likes_red.png";else k="jim_likes.png";if(1==g)var _="jim_comments_blue.png";else _="jim_comments.png";if(1==v)var y="followed.svg";else y="follow.svg";var b=a;if(a.length>35&&(b=a.substr(0,35)+"..."),0==h)if(""==m||null==m||"mp4"==m.split(".")[1])m="../assets/img/empty-thumbnail.jpg";else if(m.includes("|")){var S=m.split("|")[0];m=domain+"/nexilis/images/"+S}else m=domain+"/nexilis/images/"+m;else m=""!=m?domain+"/filepalio/image/"+m:"/nexilis/assets/img/ic_person_boy.png";let e='\n                    <div class="col-1 px-0 d-flex align-items-center">\n                        <img src="../assets/img/ic_verified_flag.png" style="width: 13px; height: 13px; margin-left: 3px;"> \n                    </div>';if(1==localStorage.lang)var A="REKAMAN";else A="RECORDED";var C=`<div id="video-${s}" class="row gx-0 shadow-sm m-2" style="border-radius: 10px">\n                                        <div class="col-5" onclick="changeVideo('`+w+"', '"+m+'\')">\n                                            <div class="video-thumb-wrap">\n                                                <img class="video-thumb" src="'+m+'" >\n                                                <span class="text-white p-1 text-recorded">'+A+'</span>\n                                            </div>\n                                        </div>\n                                        <div class="col-7 video-info" style=" padding: .5rem .75rem;">\n                                            <div class="row">\n                                                <div class="col-10">\n                                                    <h6 class="title" onclick="openProfile(\''+u+"')\">"+b+'</h6>\n                                                </div>\n                                                <div class="col-2">\n                                                    <div class="dropdown">\n                                                        <a class="post-status dropdown-toggle" data-bs-toggle="dropdown" id="report-'+s+'">\n                                                            <img src="../assets/img/icons/More.png" height="25" width="25" style="background-color:unset;">\n                                                        </a>\n                                                        <ul class="dropdown-menu" aria-labelledby="report-'+s+`">\n                                                            <li>\n                                                                <a class="dropdown-item button_report" onclick="reportContent('${s}','0')">Report/flag Content</a>\n                                                            </li>\n                                                            <li>\n                                                                <a class="dropdown-item button_report" onclick="reportUser('${u}')">Report/flag User</a>\n                                                            </li>\n                                                            <li>\n                                                                <a style="color:brown" class="dropdown-item button_report" onclick="blockContent('${s}')">Remove/Block Content</a>\n                                                            </li>\n                                                            <li>\n                                                                <a style="color:brown" class="dropdown-item button_report" onclick="blockUser('${u}')">Remove/Block User</a>\n                                                            </li>\n                                                        </ul>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="mt-2 bottom-info col-10" style="color: grey; font-size: 13px">\n                                                <div class="row d-flex align-items-center" style="margin-left:1px">\n                                                    ${2==p?e:""}\n                                                    <div class="col-11 ${2==p?"ps-2 pe-0":"px-0"}">\n                                                        <h6 class="mb-0 owner-name">${l}</h6>\n                                                    </div>\n                                                </div>\n                                                <div class="row section-social" onclick="likeProduct('${s}','1')">\n                                                    <div class="col-4">\n                                                        <img class="like-icon" id="like-${s}" src="../assets/img/${k}"> <span class="like-counter" id="like-counter-${s}">`+d+`</span>\n                                                    </div>\n                                                    <div class="col-4" onclick="openComment('${s}','1')">\n                                                        <img class="comment-icon" src="../assets/img/${_}"> <span class="comment-counter">`+c+` </span>\n                                                    </div>\n                                                    <div class="col-4" id="follow-div-${s}" onclick="followUser('${u}','${v}','${s}')"> \n                                                        <img id="follow-${u}" class="comment-icon" src="../assets/img/social/${y}" style="opacity: 0.6"> <span class="follow-counter-${s}" style="color: #3678bd">`+c+" </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>";$("#section-list-video").append(C)}$("#noMoreVideo").remove(),busy=!1}}},t.open("post","../logics/get_video"),t.send(o)}function followUser(e,o,i){if(window.Android){if(!window.Android.checkProfile())return;f_pin=window.Android.getFPin()}else{if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===checkIOS)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:$user+"|"+$flag,param2:"follow_user"});f_pin=new URLSearchParams(window.location.search).get("f_pin")}var t=(new Date).getTime(),n=new FormData;n.append("l_pin",e),n.append("f_pin",f_pin),n.append("last_update",t),n.append("flag_follow",o);let r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var o=r.responseText,t=parseInt($("#follow-counter-"+i).text());1==o?($("#follow-"+e).attr("src","../assets/img/social/followed.svg"),t+=1,$("#follow-counter-"+i).text(t),$("#follow-div-"+i).attr("onclick",'followUser("'+e+'","1","'+i+'")')):($("#follow-"+e).attr("src","../assets/img/social/follow.svg"),t-=1,$("#follow-counter-"+i).text(t),$("#follow-div-"+i).attr("onclick",'followUser("'+e+'","0","'+i+'")'))}},r.open("post","/nexilis/logics/follow_user"),r.send(n)}async function searchFilter(){var e=window.location.href,o="";query=$("#query").val();var i,t=activeFilter;window.Android?(i=window.Android.getFPin())&&(o=o.includes("?")?o+"&f_pin="+i:o+"?f_pin="+i):(i=new URLSearchParams(window.location.search).get("f_pin"))&&(o=o.includes("?")?o+"&f_pin="+i:o+"?f_pin="+i);if(e.includes("#")&&(e=e.split("#")[0]),e.includes("?")&&(e=e.split("?")[0]),""==query&&""==t||(o.includes("?")?o+="&":o+="?"),""!=query){o=o+"query="+encodeURIComponent(query),""!=t&&(o+="&")}if(""!=t){o=o+"filter="+encodeURIComponent(t)}e+=o=(o=(o=o+"&verified="+otherFilter.verified)+"&friends="+otherFilter.friends)+"&others="+otherFilter.others,offset=0,window.history.replaceState(null,"",e),firstRunVideo(e)}f_pin=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"),window.Android?window.Android.tabShowHide(!0):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.tabShowHide&&window.webkit.messageHandlers.tabShowHide.postMessage({param1:!0});let categoryTree,category_arr=[];function fetchCategory(){let e="";if(window.Android)try{e=window.Android.getFPin()}catch(e){}else e=new URLSearchParams(window.location.search).get("f_pin");let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status&&(category_arr=JSON.parse(o.responseText),category_arr.length>0)){categoryTree=unflatten(category_arr);let e={CATEGORY_ID:"0",NAME:"root",CHILDREN:categoryTree};createCategoryCheckbox($("#category-checkbox ul#root-category"),e)}},o.open("get","/nexilis/logics/fetch_posts_category?f_pin="+e),o.send()}const unflatten=e=>{const o=e.map((e=>({...e}))).reduce(((e,o)=>{e[o.CATEGORY_ID]=e[o.CATEGORY_ID]||o,e[o.PARENT]=e[o.PARENT]||{};const i=e[o.PARENT];return i.CHILDREN=i.CHILDREN||[],i.CHILDREN.push(o),e}),{});return Object.values(o).find((e=>void 0===e.CATEGORY_ID)).CHILDREN};function createCategoryCheckbox(e,o){for(var i in o.CHILDREN)if(null!=o.CHILDREN){var t=o.CHILDREN[i];if($item=$("<li>",{id:"item-"+t.CATEGORY_ID}),$item.append($("<input>",{type:"checkbox",id:t.CATEGORY_ID,name:"item-"+t.CATEGORY_ID})),$item.append($("<label>",{for:t.CATEGORY_ID,text:t.NAME})),e.append($item),t.CHILDREN)createCategoryCheckbox($("<ul>").appendTo($item),t)}checkboxBehavior()}function checkboxBehavior(){$("#categoryFilter-body li :checkbox").on("click",(function(){var e=$(this).is(":checked");$(this).closest("ul").find("ul li input:checkbox").prop("checked",e)}))}function fetchDefaultCategory(){let e="";e=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin");let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){let e=JSON.parse(o.responseText);if("1"===e.APP_URL||"2"===e.APP_URL||"0"===e.APP_URL?null!==e.APP_URL_DEFAULT&&""!==e.APP_URL_DEFAULT&&(defaultCategory=e.APP_URL_DEFAULT):"1"!==e.CONTENT_TAB_LAYOUT&&"2"!==e.CONTENT_TAB_LAYOUT&&"0"!==e.CONTENT_TAB_LAYOUT||null!==e.CONTENT_TAB_DEFAULT&&""!==e.CONTENT_TAB_DEFAULT&&(defaultCategory=e.CONTENT_TAB_DEFAULT),""!==defaultCategory){defaultCategory.split(",").forEach((e=>{$("#croot-category input#"+e).prop("checked",!0)}))}}},o.open("get","/nexilis/logics/fetch_default_category?f_pin="+e),o.send()}function activeCategoryTab(){let e=new URLSearchParams(window.location.search).get("filter");if($("#filter-friends").prop("checked",1==otherFilter.friends),$("#filter-verified").prop("checked",1==otherFilter.verified),$("#filter-others").prop("checked",1==otherFilter.others),null!=e){e.split("-").forEach((e=>{$("#categoryFilter-body input#"+e).prop("checked",!0)}))}else fetchDefaultCategory()}function selectCategoryFilter(){let e=[];$("#root-category input:checked").each((function(){e.push($(this).attr("id"))})),activeFilter=e.join("-"),$("#other-category li input").each((function(){otherFilter.verified=$("#filter-verified").is(":checked")?1:0,otherFilter.friends=$("#filter-friends").is(":checked")?1:0,otherFilter.others=$("#filter-others").is(":checked")?1:0})),$("#modal-categoryFilter").modal("toggle"),searchFilter()}function showHideFilter(e){e?($("#header").removeClass("d-none"),isSearchHidden=!1,$("#company-logo").addClass("d-none")):($("#header").addClass("d-none"),isSearchHidden=!0,selectCategoryFilter(),$("#company-logo").removeClass("d-none"))}function eraseQuery(){$("#searchFilterForm-a input#query").val().trim().length>0&&$("#delete-query").removeClass("d-none"),$("#delete-query").click((function(){$("#searchFilterForm-a input#query").val(""),$("#delete-query").addClass("d-none");let e=new URLSearchParams(window.location.search).get("query");null!=e&&""!=e&&searchFilter()})),$("#searchFilterForm-a input#query").keyup((function(){""!=$(this).val()?$("#delete-query").removeClass("d-none"):$("#delete-query").addClass("d-none")}))}function resetSearch(){$("#searchFilterForm-a input#query").val("")}function openSetting(){if(window.Android)window.Android.openSetting();else if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.openSetting)return void window.webkit.messageHandlers.openSetting.postMessage({param1:""})}function toggleVideoMute(){let e=document.getElementById("video-wrap"),o=e.querySelector("video"),i=e.querySelector(".video-sound img");o.muted?(o.muted=!1,i.src="../assets/img/video_unmute.png"):(o.muted=!0,i.src="../assets/img/video_mute.png")}function toggleFullscreen(){var e=document.querySelector("#video-wrap video");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function closeVideo(){$("#video-wrap").addClass("d-none"),$("#video-wrap video").attr("src",""),$("#main-video").off("click"),setTimeout((function(){$("#main-video").click((function(){changeVideo(mainVid,mainPoster)}))}),600)}function resetFilter(){activeFilter="",query="",$("#query").val(""),$("#delete-query").addClass("d-none"),otherFilter.verified=1,otherFilter.friends=0,otherFilter.others=0,$("#filter-verified").prop("checked",!0),$("#filter-friends").prop("checked",!1),$("#root-category input:checkbox").each((function(){$(this).prop("checked",!1)})),showHideFilter(!1),searchFilter()}function pauseAll(){disableMainVid=!0,closeVideo(),resetFilter()}function getListLS(){return new Promise(((e,o)=>{if(window.Android)try{listLS=window.Android.getListLiveStreaming()}catch(e){}let i=[];try{let e=listLS.slice(1,-1).replaceAll('"',"").replaceAll('"',""),o=[];""!=e&&e.length>0&&(o=e.split(",")),o.length>0&&o.forEach((e=>{let o=e.split("|"),t={USER_PIN:o[0],TIME:parseInt(o[1]),USERNAME:o[2].trim(),THUMB_ID:o[3].trim(),TITLE:o[4].split("~")[1],TOTAL_LIKES:0,COMMENT_USER:0,FILE_ID:"",POST_ID:o[0]+parseInt(o[1]),OFFICIAL_ACCOUNT:0,IS_LIKED:0,IS_COMMENT:0,IS_LS:1,DATA:e.replaceAll("| |","||")};i.push(t)}))}catch(e){}e(i)}))}function resumeAll(){disableMainVid=!1}function playPause(){}function checkVideoPlayPause(){let e=document.querySelector("#video-wrap video");e.addEventListener("pause",(o=>{$(".video-play").removeClass("d-none"),$("#video-wrap video").off("click"),setTimeout((function(){$("#video-wrap video").click((function(){0==disableMainVid&&e.play()}))}),600)})),e.addEventListener("play",(o=>{$(".video-play").addClass("d-none"),$("#video-wrap video").off("click"),setTimeout((function(){$("#video-wrap video").click((function(){e.pause()}))}),600)}))}function scrollingFunction(){$(document).scrollTop()>navbarToTop?$("#scroll-to-top").removeClass("d-none"):$("#scroll-to-top").addClass("d-none")}function totopFunction(e){window.scrollTo({top:0})}function openLiveStream(e){try{window.Android&&window.Android.openLiveStream(e)}catch(e){}}function openComment(e,o,i=!1){if(window.Android){if(window.Android.checkProfile()){let i=window.Android.getFPin();window.location="comment.php?product_code="+e+"&is_post="+o+"&f_pin="+i}}else{if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===i)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:e+"|"+o,param2:"comment"});{let i=new URLSearchParams(window.location.search).get("f_pin");window.location="comment.php?product_code="+e+"&is_post="+o+"&f_pin="+i}}}function reportContent(e,o,i=!1){if(window.Android){if(!window.Android.checkProfile())return}else if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===i)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:e+"|"+o,param2:"report_content"});$("#modal-product").length>0&&$("#modal-product").hasClass("show")&&$("#modal-product").modal("hide"),$("#modal-category").modal("show"),localStorage.setItem("report_post_id",e),localStorage.setItem("report_count",o)}function reportContentSubmit(){var e=e=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"),o=localStorage.getItem("report_post_id"),i=$('input[name="report_category"]:checked').val(),t=localStorage.getItem("report_count"),n=new FormData;n.append("f_pin",e),n.append("post_id",o),n.append("report_category",i),n.append("count_report",t);let r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&("Berhasil"==r.responseText?($("#modal-category").modal("hide"),$("#modal-product").length>0&&$("#modal-product").hasClass("show")&&$("#modal-product").modal("hide"),$("#modal-report-success").modal("show")):alert("Report Content Gagal"))},r.open("post","../logics/report_content"),r.send(n)}function reportUser(e,o=!1){if(window.Android){if(!window.Android.checkProfile())return;$("#modal-category2").modal("show"),localStorage.setItem("f_pin_reported",e)}window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===o?window.webkit.messageHandlers.checkProfile.postMessage({param1:e,param2:"report_user"}):($("#modal-product").length>0&&$("#modal-product").hasClass("show")&&$("#modal-product").modal("hide"),$("#modal-category2").modal("show"),localStorage.setItem("f_pin_reported",e))}function reportUserSubmit(){o=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin");var e=new FormData,o=o,i=localStorage.getItem("f_pin_reported"),t=$('input[name="report_category"]:checked').val();e.append("f_pin",o),e.append("f_pin_reported",i),e.append("report_category",t),e.append("count_report",2);let n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&("Berhasil"==n.responseText?($("#modal-category2").modal("hide"),$("#modal-report-success").modal("show")):alert("Report User Gagal"))},n.open("post","../logics/report_user"),n.send(e)}function blockUser(e,o=!1){if(window.Android){if(!window.Android.checkProfile())return;t=window.Android.getFPin()}else{if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===o)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:e,param2:"block_user"});t=new URLSearchParams(window.location.search).get("f_pin")}var i=new FormData,t=t;e=e;$("#modal-product").length>0&&$("#modal-product").hasClass("show")&&$("#modal-product").modal("hide"),i.append("f_pin",t),i.append("l_pin",e);let n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status)if("Berhasil"==n.responseText){if($("#modal-block-success").modal("show"),window.Android)window.Android.blockContact(e);else if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.blockContact)return void window.webkit.messageHandlers.blockContact.postMessage({param1:e})}else alert("Block User Gagal")},n.open("post","../logics/block_user"),n.send(i)}function unblockUser(e){i=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin");var o=new FormData,i=i;e=e;o.append("f_pin",i),o.append("l_pin",e);let t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status)if("Berhasil"==t.responseText){if($("#modal-addtocart").modal("hide"),0==localStorage.lang?($("#modal-block-success .modal-body>p").text("You unblocked this user."),$("#close-blocked").text("Close")):($("#modal-block-success .modal-body>p").text("Anda telah membuka blokir user ini."),$("#close-blocked").text("Tutup")),$("#modal-block-success").modal("show"),window.Android)window.Android.blockUser(e,!1);else if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.blockUser)return void window.webkit.messageHandlers.blockUser.postMessage({param1:e,param2:!1})}else alert("Block User Failed")},t.open("post","../logics/unblock_user"),t.send(o)}function blockContent(e,o=!1){var i="";if(window.Android){if(!window.Android.checkProfile())return;i=window.Android.getFPin()}else{if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===o)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:l_pin,param2:"block_content"});i=new URLSearchParams(window.location.search).get("f_pin")}var t=new FormData,n=(i=i,e),r=new Date;now=r.getTime(),$("#modal-product").length>0&&$("#modal-product").hasClass("show")&&$("#modal-product").modal("hide"),t.append("f_pin",i),t.append("post_id",n),t.append("time",now);let a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&("Success"==a.responseText?($("#modal-addtocart").modal("hide"),$("#modal-block-content-success").modal("show")):alert("Block Post Gagal"))},a.open("post","../logics/block_post"),a.send(t)}function reloadPages(){$("#modal-report-success").modal("hide"),$("#modal-block-success").modal("hide")}function reloadPagesBlock(){$("#modal-block-content-success").modal("hide"),location.reload()}function getLikedProducts(){var e="";if(""!=(e=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin"))){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){JSON.parse(o.responseText).forEach((e=>{var o=e.PRODUCT_CODE;likedPost.push(o),$("#like-"+o).attr("src","../assets/img/jim_likes_red.png")}))}},o.open("get","/nexilis/logics/fetch_products_liked?f_pin="+e),o.send()}}function likeProduct(e,o){if(window.Android&&!window.Android.checkProfile())return;if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.checkProfile&&!1===checkIOS)return void window.webkit.messageHandlers.checkProfile.postMessage({param1:e,param2:"like"});var i=parseInt($("#like-counter-"+e).text()),t=!1;likedPost.includes(e)?(likedPost=likedPost.filter((o=>o!==e)),$("#like-"+e).attr("src","../assets/img/jim_likes.png"),i>0&&$("#like-counter-"+e).text(i-1),t=!1):(likedPost.push(e),$("#like-"+e).attr("src","../assets/img/jim_likes_red.png"),$("#like-counter-"+e).text(i+1),t=!0);var n="";n=window.Android?window.Android.getFPin():new URLSearchParams(window.location.search).get("f_pin");var r=(new Date).getTime(),a=new FormData;a.append("product_code",e),a.append("f_pin",n),a.append("last_update",r),a.append("flag_like",t?1:0),a.append("is_post",o);let s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&200==s.status&&updateScore(e,"like",t)},window.Android?window.Android.checkProfile()&&(s.open("post","/nexilis/logics/like_product"),s.send(a)):(s.open("post","/nexilis/logics/like_product"),s.send(a))}$("#toggle-filter").click((function(e){e.stopPropagation(),window.scrollTo({top:0,behavior:"instant"}),showHideFilter($("#header").hasClass("d-none")),$("#toggle-filter").rotate({angle:0,animateTo:180})})),$("#searchFilterForm-a").validate({rules:{},messages:{},submitHandler:function(e){searchFilter()},errorClass:"help-block",errorPlacement:function(e,o){}}),$("#searchFilterForm-a input#query").bind("input propertychange",(function(){""!=$(this).val()?$("#delete-query").removeClass("d-none"):$("#delete-query").addClass("d-none")})),$(window).scroll((function(){$("#header").addClass("d-none")})),$(document).ready((function(e){let o=new URLSearchParams(window.location.search);(null!=o.get("query")&&""!=o.get("query")||null!=o.get("filter")&&""!=o.get("filter"))&&(currentUrl=window.location.href),$("#company-logo").click((function(){openSetting()})),$(".video-play").click((function(){$(".video-wrap video").trigger("play")})),fetchCategory(),eraseQuery(),activeCategoryTab(),firstRunVideo(currentUrl),0==localStorage.lang?(document.getElementById("query").placeholder="Search",$("#text-recorded-main").text("RECORDED")):(document.getElementById("query").placeholder="Pencarian",$("#text-recorded-main").text("REKAMAN")),checkVideoPlayPause(),$(window).scroll((async function(){if(scrollingFunction(),$(window).scrollTop()+$(window).height()>$("#section-list-video").height()+$("#main-video").height()&&!busy&&!isCalled){let e=await checkLimitVideo(currentUrl);offset<e&&(isCalled=!1,busy=!0,offset=limit+offset,LoadMore(currentUrl))}}))})),getLikedProducts();